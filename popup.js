function isSeaArtDetail(t){try{const e=new URL(t);return/\.seaart\.ai$/.test(e.hostname)&&/\/explore\/detail\//.test(e.pathname)}catch{return!1}}async function trigger(){const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!t?.id||!t.url)return;if(!isSeaArtDetail(t.url))return void alert("Open a SeaArt artwork detail page first.");function e(){return new Promise((e=>{chrome.tabs.sendMessage(t.id,{type:"SA_TRIGGER"},(t=>{chrome.runtime.lastError?e({ok:!1,err:chrome.runtime.lastError.message}):e({ok:!0,resp:t})}))}))}let r=await e();if(!r.ok)try{await chrome.scripting.executeScript({target:{tabId:t.id},files:["utils.js"]}),await chrome.scripting.executeScript({target:{tabId:t.id},files:["xmp.js"]}),await chrome.scripting.executeScript({target:{tabId:t.id},files:["content.js"]}),r=await e()}catch(t){return void alert("Could not inject scripts. Try reloading the page.")}}const btn=document.getElementById("go");btn.addEventListener("click",trigger);